<h2>You currently have <%= pluralize @sorted_upcoming.count, "activity"%> booked: </h2>
  <div class="cards cards-dashboard">
    <% if @sorted_upcoming.count == 0 %>
      <p> <%= link_to "Find awesome activities", root_path, class: "btn-ghost btn-dashboard" %> </p>
    <% else %>
      <% @sorted_upcoming.each do |activity| %>
          <div class="card-product dashboard-card">

            <!-- Checking if cloudinary image attached -->
            <% if activity.photos.attached? %>
              <%= cl_image_tag activity.photos.first.key, height: 300, width: 400, crop: :fill, :id => "img_booking" %>
            <% else %>
              <%= cl_image_tag("cqmszae8rere14lnciwy", width: 150, height: 150, crop: :thumb, gravity: :face) %>
            <% end %>

            <!-- card design -->
            <div class="card-product-infos">
              <!-- Add Tag for My event! -->


               <% if activity.user == current_user  %>
               <h2 class="dashboard_h2">Own event:<%= link_to activity.name, activity_path(activity) %></h2>
                <%else %>
                 <h2 class="dashboard_h2"><%= link_to activity.name, activity_path(activity) %></h2>
              <% end %>
              <p class="dashboard-p"> Date: <%=activity.datetime %> </p>
              <p class="dashboard-p"> Address: <%= activity.address %></p>
              <p class="dashboard-p"> Attending users: </p>

              <!-- Listing all participating users and host -->
              <% bookings = Booking.where("activity_id = #{activity.id}") %>
              <ul>
                <% bookings.each do |booking| %>
                  <li>
                    <% user = User.find(booking.user_id) %>
                    <%= link_to user.username, user_path(user.id) %>
                  </li>
                <% end %>
                  <li>
                    <% user = User.find(activity.user_id) %>
                    <%= link_to user.username, user_path(user.id) %> Host
                  </li>
              </ul>

               <!--  Delete links for cards -->
              <p class="dashboard-p"> Address: <%= activity.address %></p>
              <% unless activity.user == current_user  %>
                <%= link_to "Can't attend #{activity.name}", booking_path(Booking.find_by(activity_id: activity.id)), method: :delete, data: { confirm: "Are you sure you want to cancel this booking??" }%>
              <% end %>
            </div>
            <br>
          </div>
      <% end %>
    <% end %>
  </div>
