<div class="container">

    <div class="card-trip">
      <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/greece.jpg" />
      <div class="card-trip-infos">
        <div>
          <h2>Title here</h2>
          <p>Short description here!</p>
        </div>
        <h2 class="card-trip-pricing">Â£99.99</h2>
        <img src="https://kitt.lewagon.com/placeholder/users/krokrob" class="card-trip-user avatar-bordered" />
      </div>
    </div>




<h2>You currently have <%= pluralize @sorted_upcoming.count, "activity"%> booked: </h2>
<div class="cards cards-dashboard">
  <% if @sorted_upcoming.count == 0 %>
  <p> <%= link_to "Find awesome activities", root_path, class: "btn-outline btn-dashboard" %> </p>
  <% else %>
  <% @sorted_upcoming.each do |activity| %>
  <div class="card-product dashboard-card">

    <!-- Checking if cloudinary image attached -->
    <% if activity.photos.attached? %>
    <%= cl_image_tag activity.photos.first.key, class: "w-100", crop: :fill, :id => "img_booking" %>
    <% else %>
    <%= cl_image_tag("cqmszae8rere14lnciwy", width: 50, height: 50, crop: :thumb, gravity: :face) %>
    <% end %>

    <!-- card design -->



    <div class="card-product-infos">
      <!-- Add Tag for My event! -->


      <% if activity.user == current_user  %>
      <h2 class="dashboard_h2">Own event:<%= link_to activity.name, activity_path(activity) %></h2>
      <%else %>
      <h2 class="dashboard_h2"><%= link_to activity.name, activity_path(activity) %></h2>
      <% end %>
      <p class="dashboard-p"> Date: <%=activity.datetime %> </p>
      <p class="dashboard-p"> Address: <%= activity.address %></p>
      <p class="dashboard-p"> Attending users: </p>


      <!-- card design -->
      <div class="card-product-infos">
        <!-- Add Tag for My event! -->
        <% if activity.user == current_user  %>
        <h1> My event: </h1>
        <% end %>
        <h2 class="dashboard_h2"><%= link_to activity.name, activity_path(activity) %></h2>
        <p class="dashboard-p"> Date: <%=activity.datetime.strftime("%b %eth %Y, %k:%M") %> </p>
        <p class="dashboard-p"> Address: <%= activity.address %></p>
        <p class="dashboard-p"> Attending users: </p>

        <!-- Listing all participating users and host -->
        <% bookings = Booking.where("activity_id = #{activity.id}") %>
        <div class="participants">
          <% bookings.each do |booking| %>
          <% user = User.find(booking.user_id) %>
          <% if user.photo.attached? %>
          <div class="avartar-set">
            <div class="avartar-name">
              <%= link_to cl_image_tag(user.photo.key, class: "avatar"), user_path(user.id) %>
              <%= link_to user.username, user_path(user.id) %>

            </div>
          </div>
          <% else %>
          <div class="avartar-set">
            <%= link_to user.username, user_path(user.id) %>
            <%= link_to cl_image_tag("img_264570_wuw5yx", class: "avatar"), user_path(user.id) %>
          </div>
          <% end %>
          <% end %>
        </div>
        Hosted by:
        <div class="participants">
          <% if current_user.photo.attached? %>
          <%= link_to cl_image_tag(current_user.photo, class: "avatar"), user_path(current_user) %>
          <% else %>
          <div class="avartar-set">
            <%= link_to current_user.username, user_path(current_user) %>
            <%= link_to cl_image_tag("img_264570_wuw5yx", class: "avatar"), user_path(current_user) %>
            <% end %>
          </div>
        </div>

        <!--  Delete links for cards -->
        <p class="dashboard-p"> Address: <%= activity.address %></p>
        <% unless activity.user == current_user  %>
        <%= link_to "Can't attend #{activity.name}", booking_path(Booking.find_by(activity_id: activity.id)), method: :delete, data: { confirm: "Are you sure you want to cancel this booking??" }%>
        <% end %>
      </div>
      <br>
    </div>
    <% end %>
    <% end %>
  </div>
</div>

</div>
</div>
