<% @activity.photos.each do |photo| %>
<div class="img-back w-100">
  <%= cl_image_tag photo.key, height: 300, class: 'w-100', crop: :fit %>
  <% end %>
  <%= link_to "Back", :back, class: "btn btn-outline" %>
</div>

<div class="content">
  <div class="title-btn">
    <h1><strong> <%= @activity.name %></strong></h1>
    <!-- booking btn -->
    <% if @booking.errors.any? %>
    <div class="alert">
      <% @booking.errors.full_messages.each do |message| %>
      <span>  ðŸ˜± <%= message %></span>
      <a data-dismiss="alert" aria-label="Close"></a>
      <i class="fas fa-times"></i>
      <% end %>
    </div>
    <% end %>
    <% if @booking.user != @activity.user && @booking.user != current_user %>
      <% if !policy(@activity).update? && !current_user.attending_activity?(@activity) %>
          <div>
          <%= link_to 'Join',new_activity_booking_path(@activity), class: "btn btn-primary" %>
          </div>
      <% end %>
    <% end %>
  </div>

  <p>Starting at: <%= @activity.datetime.strftime("%b %eth %Y, %k:%M") %></p>
  <p>Category: <%= @activity.category %></p>
  <% if @activity.user != current_user %>
  <%= link_to "Contact host", activity_conversations_path(@activity), method: "Post" %>
  <% end %>
  <div class="avartar-set">
    <% if @activity.user.photo.attached? %>
      <div class="avartar-name">
        <%= link_to cl_image_tag(@activity.user.photo.key, class: "avatar"), user_path(@activity.user) %>
        <%= @activity.user.username %>
      </div>
    <% else %>
      <div class="avartar-name">
        <%= @activity.user.username %>
        <%= link_to cl_image_tag("img_264570_wuw5yx", class: "avatar"), user_path(@activity.user) %>
      </div>
    <% end %>
  </div>

  <!-- Contacting host link, host cannot contact himself (if else) -->
  <p>Capacity: <%= @activity.capacity %></p>
  <p>Spaces left: <%= @activity.capacity - @activity.bookings.count %></p>
  <p>About:  <%= @activity.description %></p>
  <p><%= @activity.address %></p>
  Who is going:
  <div class="participants">
    <% @activity.bookings.each do |booking| %>
      <% user = User.find(booking.user_id) %>
      <% if user.photo.attached? %>
      <div class="avartar-set">
        <div class="avartar-name">
          <%= link_to cl_image_tag(user.photo.key, class: "avatar"), user_path %>
          <%= user.username %>
        </div>
      </div>
      <% else %>
      <div class="avartar-set">
        <%= user.username %>
        <%= link_to cl_image_tag("img_264570_wuw5yx", class: "avatar"), user_path(user.id) %>
      </div>
      <% end %>
    <% end %>
  </div>
 <p><%= link_to "Back", :back, class: "btn btn-outline" %></p>
  </div>

<div class="map"
id="map"
style="width: 100%;
height: 600px;"
data-marker="<%= @marker.to_json %>"
data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
></div>

  <% if policy(@activity).destroy? %>
  <%= link_to "Edit", edit_activity_path, class: "btn btn-green" %>
  <%= link_to "Cancel", activity_path, class: "btn btn-orange", method: :delete, data: { confirm: "You sure?" } %>
  <% end %>

